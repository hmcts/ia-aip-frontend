{% set pageTitleName = i18n.pages.name.title %}
{% extends "layout.njk" %}
{% from "govuk/components/fieldset/macro.njk" import govukFieldset %}

{% block content %}
  {% if errorList %}
      {{ govukErrorSummary({
          titleText: i18n.error.summary.title,
          errorList: errorList
      }) }}
  {% endif %}

<form method="post" action="{{ formAction }}" type="submit">
    {% call govukFieldset({
        legend: {
            text: i18n.pages.hearingRequirements.witnessesSection.hearingWitnessNames.title,
            classes: "govuk-fieldset__legend--xl",
            isPageHeading: true
        }
    }) %}
    <input type="hidden" name="_csrf" value="{{ csrfToken }}">
    {{ govukInput({
        label: {
            text: i18n.pages.hearingRequirements.witnessesSection.hearingWitnesses.text
        },
        classes: "govuk-input--width-20",
        id: "witnessName",
        name: "witnessName",
        errorMessage: {
            text: error["witnessName"].text
        } if error["witnessName"]
    }) }}

        {{ govukButton({
            text: i18n.common.buttons.addAnotherWitness,
            name: 'addAnotherWitness',
            classes: "govuk-button--secondary",
            attributes: {
                formaction: addWitnessAction + '?_csrf=' + csrfToken
            }
        }) }}

        {% if witnessNames %}
        <div class="panel">
            <h2>Added witnesses</h2>

            <table width="100vw">
                {% for name in witnessNames %}
                    <tr style="border-bottom:1pt solid black;">
                        <td >{{ name }}</td>
                        <td align="right"><a class="govuk-link app-contact-panel__link"
                               href="{{ removeWitnessAction + '?_csrf=' + csrfToken + '&name=' + name | escape }}">Remove</a>
                        </td>
                    </tr>
                {% endfor %}
            </table>
        </div>
        {% endif %}
    {{ saveButtons() }}
    {% endcall %}
</form>
{{ contactUs() }}
{% endblock %}
